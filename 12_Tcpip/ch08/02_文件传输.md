
FTP 是在两个相连的计算机之间进行文件传输时使用的协议。


### 工作机制

FTP 使用两条 TCP 连接: 一条用来控制，另一条用于数据(文件)的传输。

用于控制的 TCP 连接主要在 FTP 的控制部分使用。例如登录用户名和密码的验证、发送文件的名称、发送方式的设置。利用这个连接，可以通过 ASCII 码字符串发送请求和接收应答。

FTP 控制用的连接使用 TCP21 号端口。在 TCP21 端口上进行文件 GET(RETR)、PUT(STOR)、以及文件一览(LIST)等操作时，每次都会建立一个用于数据传输的 TCP 连接。当数据传送完毕之后，这条传输连接也会被断开，然后会在控制用的连接上继续进行命令或应答的处理。

数据传输用的 TCP 连接通常使用端口 20 。

通常，用于数据传输的 TCP 连接是按照与控制用的连接相反的方向建立的。因此，在通过 NAT 连接外部 FTP 服务器的时候，无法直接建立传输数据时使用的 TCP 连接。此时，必须使用 PASV 命令修改建立连接的方向才行。
