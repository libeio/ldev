
### 计算机协议

计算机系统通过网络实现互相通信的背后，是协议在起作用。

简单来说，协议就是计算机与计算机之间通过网络实现通信时事先达成的一种"约定"。这种"约定"使那些由不同厂商的设备、不同的 CPU 以及不同的操作系统组成的计算机之间，只要遵循相同的协议就能够实现通信。反之，如果所使用的协议不同，就无法实现通信。协议可以分为很多种，每一种协议都明确地界定了它的行为规范。两台计算机之间必须能够支持相同的协议，并遵循相同协议进行处理，这样才能实现相互通信。


### 分组交换性质

绝大多数协议的应用载体是以太网。以太网是一种分组交换网，它将大数据分割为一个个叫做包(Packet)的较小单位进行传输。也因此，现代计算机协议具有分组交换的特点。

一个较大的数据被分为多个分组时，为了标明是原始数据中的哪一部分，就有必要将分组的序号写入包中。接收端会根据这个序号，再将每个分组按照序号重新装配为原始数据。

通信协议中，通常会规定报文首部应该写入哪些信息、应该如何处理这些信息。相互通信的每一台计算机则根据协议构造报文首部、读取首部内容等。为了双方能正确通信，分组的发送方和接收方有必要对报文首部和内容保持一致的定义和解释。


### 分层协议模型

OSI(pen System Interconnection)开放系统互连参考模型是国际标准化组织(ISO)制定的一个用于计算机或通信系统间互联的标准体系。

分层模型把复杂的网络划分成更容易管理的层(相当于将整个庞大而复杂的问题划分为若干个容易处理的小问题)，第一层独立完成各自该做的任务，互不影响，分工明确，上层不关心下层具体细节。

在分层模型中，每个分层都接收由它下一层所提供的特定服务，并且负责为自己的上一层提供特定的服务。上下层之间进行交互时所遵循的约定叫做"接口"。同一层之间的交互所遵循的约定叫做"协议"。

OSI 七层模型是理想化的，它的分层有些冗余，一般用于理论研究。实际应用选择的是 TCP/IP 四层模型。


### 补充: 电路交换与分组交换

> 电路交换

在电路交换中，交换机主要负责数据的中转处理。计算机首先被连接到交换机上，而交换机与交换机之间则由众多通信线路再继续连接。因此计算机之间在发送数据时，需要通过交换机与目标主机建立通信电路，建立好连接以后，用户就可以一直使用这条电路，直到该连接被断开为止。

如果某条电路只是用来连接两台计算机的通信线路，就意味着只需在这两台计算机之间实现通信，因此这两台计算机是可以独占线路进行数据传输的。但是，如果一条电路上连接了多台计算机，而这些计算机之间需要相互传递数据，就会出现新的问题。鉴于一台计算机在收发信息时会独占整个电路，其他计算机只能等待这台计算机处理结束以后才有机会使用这条电路收发数据。并且在此过程中，谁也无法预测某一台计算机的数据传输从何时开始又在何时结束。如果并发用户数超过变换机之间的通信线路数，就意味着通信根本无法实现。


> 分组交换

让连接到通信电路的计算机将所要发送的数据分成多个数据包，按照一定的顺序排列之后分别发送，这就是分组交换。有了分组交换，数据被细分后，所有的计算机就可以一齐收发数据，这样也就提高了通信线路的利用率。由于在分组的过程中，已经在每个分组的首部写入了发送端和接收端的地址，所以即使同一条线路同时为多个用户提供服务．也可以明确区分每个分组数据发往的目的地，以及它是与哪行计算机进行的通信。

在分组交换中，由分组交换机(路由器)连接通信线路。分组交换的大致处理过程是：发送端计算机将数据分组发送给路由器，路由器收到这些分组数据以后，缓存到自己的缓区，然后再转发给目标计算机。

在分组交换中，计算机与路由器之间以及路由器与路由器之间通常只有一条通信线路共享。在电路交换中，计算机之间的传输速度不变，然而在分组交换中，通信线路的速度可能会有所不同。根据网络拥堵的情况，数据达到目标地址的时间有长有短。另外，路由器在缓存饱和或溢出时，甚至可能会发生分组数据丢失、无法发送到对端的情况。


### 补充: 传输速率与吞吐率

在数据传输的进程中，两个设备之间单位时间内数据流动的物理速度称为传输速率，单位为bps(Bits Per Second，每秒比特数)。

以道路交通为例，低速数据链路就如同车道较少无法让很多车同时通过的情况。与之相反，高速数据链路就相当于有多个车道，一次允许更多车辆行驶的道路。传输速率又称作带宽(Bandwidth)。带宽越大网络传输能力就越强。

此外，主机之间实际的传输速率被称作吞吐量。其单位与带宽相同，都是bps(Bits Per Second)。

吞吐量这个词不仅衡量带宽，同时也衡量主机的 CPU 处理能力、网络的拥堵程度、报文中有效载荷的占有份额(不含报文首部，只计算数据字段本身)等信息。
