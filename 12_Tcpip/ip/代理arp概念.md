
## 代理 ARP 概念
- 情景描述
	+ 网络 M 和网络 S 为两个独立的物理网络，路由器 R 连接这两个网络。m1,m2,m3 ... 和
	  s1,s2,s3 ... 分别为位于这两个物理网络上的主机群。
	+ 正常来看，网络 M 和网络 S 拥有两个不同的网络号，路由器 R 的路由表内保存有两个直连到
	  M 和 S 的网络地址，M 和 S 的主机如果想要通信则必须通过 R 进行转发。
	+ 现在 M 和 S 仍然是两个独立的网络，只是 M 和 S 共用一个网络号，该怎么实现 m1 与 s1 
	  之间的通信呢？
- 解决方案
	+ R 运行代理 ARP 软件，它捕获 m1 广播的 ARP 请求，发现要通信的 s1 位于另一个物理网络 S
	  上，R 就会向 m1 发送自己的物理地址作为ARP响应。m1 收到响应后，将地址映射(s1IP : RMAC)
	  存放到自己的ARP表中，然后用这个映射把目的站为 s1 的数据发送给 R。R 接收到数据报时，它
	  搜索一个特殊的路由表，之后转发该数据报到 s1。

## 再谈代理ARP
- 主机之间通过信任机制直接保存通过 ARP 得到的映射，而不去检查其有效性和一致性。
- 因为不一致，可能发生 ARP 表中出现多个IP地址映射到同一个物理地址的情况(如 m1 主机要与 s1,s2
  通信，则 m1 主机的 ARP 表就会保存有 s1IP:RMAC, s2IP:RMAC 两个映射)，但这并没有违反协议规范。
- 代理 ARP 完全隐藏了物理连接的细节，这相当于把路由器 R 隐藏了起来。
- 代理 ARP 仅适用于使用 ARP 进行地址解析的网络，不能应用于更复杂的网络拓扑（如多路由器互连网络）。
