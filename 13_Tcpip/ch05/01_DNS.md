
### 认识 DNS

域名系统(DNS)是为因特网提供从名字到地址的映射的系统。它维护了一个用来表示组织内部主机名和 IP 地址之间对应关系的数据库，
可以有效管理主机名和 IP 地址之间的对应关系。

在这个系统中主机的管理机构可以对数据进行变更和设定。在应用中，当用户输入主机名(域名)时，DNS 会自动检索那个注册了主机名和 IP 地址的数据库，并迅速定位对应的 IP 地址。而且，如果主机名和 IP 地址需要进行变更时，也只需要往组织机构内部进行处理即可，而没必要再向其他机构进行申请或报告。


### DNS 概念

DNS 包括两个概念独立的内容：
* 指明了名字的语法和名字的授权管理规则
* 指明了一个能高效地将名字映射为地址的分布式系统


### DNS 的域名系统管理方案

域名系统使用称为域名的分级命名方案，域名由被分隔符"."隔开的子名字序列组成，每个序列称为一个标号。

任何一个由标号形成的后缀都称为一个域，域名书写时将本地标号放在第一位，顶级域放在最后。如 cs.purdue.edu 来说，其底层域是cs.purdue.edu，第二级域是purdue.edu，顶级域是edu 。

顶级域
* 顶级域可以使用两种不同的命名分级方式：地理的和组织的。
* 必须获得上级域的许可，才能添加下级域。

名字的语法和类型
* 一个给定的名字可能映射到域名系统中的多个项。客户在解析名字时要指明所需对象的类型，并由服务器返回此类型的对象。
* 仅从域名的语法中无法区分到底是子域的名字还是某个对象的名字，也无法识别命名对象的特征。


### 通过名字服务器解析域名

名字服务器概念
* 从名字映射到地址的域名机制由若干个独立的、相互协作的称为名字服务器的系统组成，即 DNS 是由位于多个网点中的一组服务器协同动作，以解决映射问题。
* 名字服务器是提供从名字到地址的转换(从域名映射到 IP 地址)的服务器程序。
* 客户软件称为名字解析器，它在翻译名字时使用一个或多个名字服务器。

域名解析说明
* 从概念上讲，域名解析自上而下进行，从根名字服务器开始，一直延续到叶上的服务器。
* 客户软件要形成一个域名查询，它把查询发送给名字服务器以求解析。当域名服务器收到查询时，检查名字是否处于自己有权管理的子域内。如果是，就根据自己的数据库把名字转换为地址，并将回答附加到查询中，然后返回给客户。如果不能完全解析，就与能解析该名字的服务器联系进行递归解析。
* 如果客户要求迭代解析，名字服务器会将无法进行递归解析，它产生的回答指明了客户应联系的下一个解析名字的名字服务器。
* 域名服务器的所有通信都使用一个熟知协议端口，只要客户知道服务器所在机器的 IP 地址，就知道如何与服务器通信。
* 主机如何找到本地环境中运行名字服务器的地址还未形成标准，可以自己解决。

域名解析简单流程
1. 用户调用一个应用程序，并提供了与程序通信的机器名。
2. 在应用程序使用 TCP 或 UDP 之类的协议与指定机器进行通信前，应用程序必须先找到该机器的 IP 地址。
3. 应用程序将域名传给本地解析程序，并请求一个 IP 地址。
4. 本地解析程序检查自己的高速缓存，如果有这个域名就返回结果。如果本地解析程序没有答案，就形成一个报文并发送给服务器(即该程序成为一个客户)。


### 反向映射

域名系统还可以提供其他映射。反向查询允许客户请求服务器"反向映射"，即根据回答来生成得到此回答的询问。

通过反向映射服务器可以将客户的IP地址映射为域名，这种反向映射也称为指针查询。


### 动态 DNS 更新和通知

如果域名服务器和 NAT 系统相结合，那么域名服务器只能位于 NAT 盒的后面。

动态 DNS 更新允许动态地对服务器存储的信息进行修改。例如在 DHCP 服务器向一台主机分配一个 IP 地址时，它可以用动态更新机制告诉 DNS 服务器此次分配情况。

当动态改变发生时，主 DNS 服务器向所有备份 DNS 服务器发送一个通知以对管理区信息进行更新。
