
### 无状态

HTTP 是一种不保存状态，即无状态(stateless)协议。HTTP 协议自身不对请求和响应之间的通信状态进行保存。也就是说在 HTTP 这个级别，协议对于发送过的请求或响应都不做持久化处理。

使用 HTTP 协议，每当有新的请求发送时，就会有对应的新响应产生。协议本身并不保留之前一切的请求或响应报文的信息。


HTTP/1.1 虽然是无状态协议，但为了实现期望的保持状态功能，于是引入了 Cookie 技术。有了 Cookie 再用 HTTP 协议通信，就可以管理状态了。


### 使用 Cookie 进行状态管理

HTTP 的无状态特性可以减少服务器的 CPU 及内存资源的消耗。但 HTTP 应用广泛，且很多场景中需要对 HTTP 的状态进行保存，为此引入了 Cookie 管理。

Cookie 技术通过在请求和响应报文中写入 Cookie 信息来控制客户端的状态。具体是: 
* Cookie 会根据从服务端发送的响应报文内的一个叫做 `Set-Cookie` 的首部字段信息，通知客户端保存 Cookie。
* 当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入 Cookie 值后再发送出去。
* 服务器端发现客户端发送过来的 Cookie 后，将这个 Cookie 与服务器上的记录进行对比，得到之前的状态信息。

Cookie 主要用于以下三个方面：
* 会话状态管理(如用户登录状态、购物车、游戏分数或其它需要记录的信息)
* 个性化设置(如用户自定义设置、主题等)
* 浏览器行为跟踪(如跟踪分析用户行为等)

Cookie 与 Header 的区别:
* Cookie 只是 Header 的一部分。
* Cookie 通常是由服务端生成后发送给客户端进行后续的会话。Header 由发送方添加到请求头中，一般不会对发送者身份有所要求。
* Cookie 只能用于会话双方的交互，不会跨域传播(比如不能用于分布式系统)。Header 可以进行跨域访问，比如 JWT(Json Web Token)一般就通过 Header 的 `Authorization` 进行发送。
* Cookie 一般存在一个有效期，用于说明这段连接的持续会话时间。Header 只进行信息的存储，没有时长的概念。
* Header 一次只能保存一个键值对，而 Cookie 则不作限制。
