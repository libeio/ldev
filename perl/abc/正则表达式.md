
#### perl 正则

perl 语言的正则表达式功能非常强大，基本上是常用语言中最强大的，很多语言设计正则式支持的时候都参考 perl 的正则表达式。其中就有最著名的 PCRE 库。


perl 正则表达式有三种形式，分别是匹配，替换和转化:

- 匹配: m// 或 //
- 替换: s///
- 转化: tr///

这三种形式一般都和 =~ 或 !~ 搭配使用，前者表示相匹配，后者表示不匹配。


#### 匹配

匹配操作符 m// 用于匹配一个字符串语句或一个正则表达式:
```pl
    $bar = "I am runoob site. welcome to runoob site.";
    if ($bar =~ /run/) {
        print "match\n";
    }
```

匹配操作符有一些模式匹配修饰符，但相比这些，下面的东西会更实用一些。

perl 处理完后会将结果存放在三个特殊变量名中，如下:
```pl
    $`   匹配部分的前一部分字符串
    $&   匹配到的字符串
    $'   还未匹配到的剩余字符串
```


#### 替换

替换操作符 s/// 是匹配操作符的扩展，使用新的字符串替换指定的字符串。基本格式如下:
```pl
    s/PATTERN/REPLACEMENT/
```
PATTERN 为匹配模式，REPLACEMENT 为替换的字符串。

```pl
    $string = "welcome to the Moon";
    $string =~ s/Moon/Earth/;
    
    print "$string\n";      # welcome to the Earth
```

一些比较实用的替换操作修饰符:

| 修饰符 | 描述 |
|:------:|:-----|
| i      | 不区分大小写 |
| m      | 每一行的开头就是"^"，结尾就是"$" |
| o      | 表达式只执行一次 |
| s      | 如果在修饰符中加入"s"，那么默认的"."代表除了换行符以外的任何字符将会变成任意字符，也就是包括换行符 |
| x      | 忽略模式中的空白 |
| g      | 替换所有匹配的字符串 |
| e      | 替换字符串作为表达式 |



#### 转化

```pl
    $string = 'welcome to runoob site.';
    $string =~ tr/a-z/A-Z/;
    
    print "$string\n";      # WELCOME TO RUNOOB SITE.
```

关于转化相关修饰符:

| 修饰符 | 描述 |
|:------:|:-----|
| c      | 转化所有未指定字符 |
| d      | 删除所有指定字符 |
| s      | 把多个相同的输出字符减少为一个 |

以下示例使用 /s 将变量 $string 重复的字符删除:
```pl
    $string = 'runoob';
    $string =~ tr/a-z/a-z/s;
    
    print "$string\n";      # runob
```

将所有非数字字符替换为空格:
```pl
    $string =~ tr/\d/ /c;
```

删除 tab 和空格:
```pl
    $string =~ tr/\t //d;
```

把数字间的其他字符替换为一个空格:
```pl
    $string =~ tr/0-9/ /cs;
```
先执行 c ，再执行 s 。这里的未指定字符即为非数字字符，即将非数字字符转化为空格，然后通过 s 将连续空格减少为一个。


#### 更多正则表达式规则

| 表达式 | 描述 |
|:------:|:-----|
|   .    |    匹配除换行符以外的所有字符 |
|   []   |    匹配符合 [] 内的字符 |
|   [^]  |    匹配不符合 [] 内的字符 |
|   ^    |    匹配字符开头的字符 |
|   $    |    匹配字符结尾的字符 |
|   \d   |    匹配一个数字字符,和 [0-9] 语法一样 |
|   \D   |    非数字 |
|   \w   |    英文字母或数字的字符串,和 [a-zA-Z0-9_] 语法一样 |
|   \W   |    非英文字母或数字的字符串,和 [^a-zA-Z0-9_] 语法一样 |
|   \s   |    空格,和 [\n\t\r\f] 语法一样 |
|   \S   |    非空格,和 [^\n\t\r\f] 语法一样 |
|   \b   |    匹配以英文字母,数字为边界的字符串 |
|   \B   |    匹配不以英文字母,数值为边界的字符串 |
|  a|b|c |    匹配符合a字符或是b字符或是c字符的字符串 |
|   abc  |    匹配含有 abc 的字符串 (pattern)() 这个符号会记住所找寻到的字符串。第一个 () 内所找到的字符串通过 $1 或 \1 引用,第二个 () 内所找到的字符串通过 $2 或是 \2 引用,以此类推 |
|   x?   |    匹配 0 次或一次 x 字符，字符串，数字 |
|   x*   |    匹配 0 次或多次 x 字符，字符串，数字，最小匹配 |
|   x+   |    匹配 1 次或多次 x 字符，字符串，数字，最小匹配 |
|   {m}  |    匹配刚好是 m 个 的指定字符串 |
| {m,n}  |    匹配在 m个 以上 n个 以下 的指定字符串 |
|   {m,} |    匹配 m个 以上 的指定字符串 |
