

### 流迭代器种类

标准库提供了 4 个迭代器类型，以使流I/O能够融入容器和标准库算法的通用框架之中。如下:
- ostream_iterator:     用于向 ostream 写入
- istream_iterator:     用于由 istream 读出
- ostreambuf_iterator:  用于向流缓冲区写入
- istreambuf_iterator:  用于由流缓冲区读出

部分声明展示如下:
```c++
    template<class T, class charT=char, class traits=char_traits<charT>, class Distance=ptrdiff_t>
        class istream_iterator;
        
    template<class T, class charT=char, class traits=char_traits<charT>>
        class ostream_iterator;
```

通俗的来说，就是使流可以像容器一样，使用迭代器对其进行操作。


### 流迭代器的构造

这里以 istream_iterator 为例。

istream_iterator 定义了三个构造函数，分别用于缺省、初始化和拷贝:
```c++
    istream_iterator();                             // default
    istream_iterator(istream_type& s);              // initialization
    istream_iterator (const istream_iterator& x);   // copy
```

其中缺省构造表示输入结束:
```c++
    default constructor
        Constructs an end-of-stream istream iterator.
```

istream_iterator 绑定并操作文件流示例：
```c++
    void f() {
        std::vector<int> ivec;
        std::fstream fs ("ints.txt", std::fstream::in);
        std::copy(std::istream_iterator<int>(fs), std::istream_iterator<int>(), std::back_inserter(ivec));
    }
```


### 流迭代器用法

创建流迭代器对象用来处理指定类型的流对象数据时，数据的类型就是迭代器模板的参数类型，流对象是流迭代器构造函数的参数。

输入流迭代器和输出流迭代器分别属于迭代器类型的输入和输出迭代器，所以一个 istream_iterator 或 ostream_iterator 只能用一次，如果想再次从流中读取对象或将对象输出到流，需要创建新的 istream_iterator 或 ostream_iterator 对象。

> 输入流迭代器

比如 istream_iterator<T> 就是一个从流 istream 中读取 T 类型的对象。比如对于下种内容的文本文件，我在这里尝试以 int 作为类型读取并存储到数组中。
```txt
    
    100

    123 345     567 a 789, m901
```
编写如下代码:
```c++
    std::vector<int> iv;
    std::ifstream ifs(filename, std::ifstream::in);
    std::copy(std::istream_iterator<int>(ifs), std::istream_iterator<int>(), std::back_inserter(iv));
```

istream_iterator<T>无参构造函数可以创建一个结束迭代器来判断流是否结束。

iv 中元素输出如下:
```
    100 123 345 567
```
从上面的示例可以看出，流输入迭代器默认为忽略空白符，并且按照按照指定的数据类型读取数据，如果遇到不匹配的数据类型则读取结束。

[流迭代读取int类型](02_istream_iterator/istream_iterator_int.cpp)

这里也可以尝试将读取的数据类型设置为 char，观察执行结果。

[流迭代器读取char类型](02_istream_iterator/istream_iterator_char.cpp)


> 输出流迭代器

输出流迭代器 ostream_iterator 为对象提供了一次向输出流输出的功能。当创建一个 ostream_iterator 对象时，可以选择字符串分隔符，用来分隔每个输出对象。

[输出流迭代器使用示例](03_ostream_iterator/ostream_iterator_int.cpp)
